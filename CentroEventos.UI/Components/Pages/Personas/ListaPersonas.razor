@page "/personas/listar"
        @using CentroEventos.Aplicacion.Entities
        @inject CentroEventos.Aplicacion.UseCases.Personas.ListarPersonasUseCase ListarPersonasUseCase
        
        <div class="container-fluid">
            <MudPaper Elevation="3" Class="pa-6 rounded-lg">
                <MudText Typo="Typo.h4" Color="Color.Primary" Class="mb-6 font-weight-bold">
                    <MudIcon Icon="@Icons.Material.Filled.Groups" Class="mr-3" />
                    Personas registradas
                </MudText>
        
                @if (!string.IsNullOrEmpty(_error))
                {
                    <MudAlert Severity="Severity.Error">@_error</MudAlert>
                }
                else if (_personas.Count == 0)
                {
                    <MudAlert Severity="Severity.Info">No hay personas registradas.</MudAlert>
                }
                else
                {
                    <MudTable Items="_personas" Hover="true" Striped="true" Elevation="0" Class="mt-4">
                        <HeaderContent>
                            <MudTh><MudText Typo="Typo.subtitle2">DNI</MudText></MudTh>
                            <MudTh><MudText Typo="Typo.subtitle2">Nombre</MudText></MudTh>
                            <MudTh><MudText Typo="Typo.subtitle2">Apellido</MudText></MudTh>
                            <MudTh><MudText Typo="Typo.subtitle2">Email</MudText></MudTh>
                            <MudTh><MudText Typo="Typo.subtitle2">Teléfono</MudText></MudTh>
                        </HeaderContent>
                        <RowTemplate>
                            <MudTd DataLabel="DNI">@context.Dni</MudTd>
                            <MudTd DataLabel="Nombre">@context.Nombre</MudTd>
                            <MudTd DataLabel="Apellido">@context.Apellido</MudTd>
                            <MudTd DataLabel="Email">@context.Email</MudTd>
                            <MudTd DataLabel="Teléfono">@context.Telefono</MudTd>
                        </RowTemplate>
                        <LoadingContent>
                            <MudText Class="pa-4" Align="Align.Center">Cargando personas...</MudText>
                        </LoadingContent>
                    </MudTable>
                }
            </MudPaper>
        </div>
        
        @code {
            private List<Persona> _personas = new();
            private string? _error;
        
            protected override void OnInitialized()
            {
                try
                {
                    _personas = ListarPersonasUseCase.Ejecutar();
                }
                catch (Exception ex)
                {
                    _personas = new List<Persona>();
                    _error = ex.Message;
                }
            }
        }